<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cordelia Vault - Role-Based Permissions</title>
    <style>
        :root {
            --primary-dark: #0a1628;
            --secondary-dark: #1e3a5f;
            --accent-teal: #4fd1c7;
            --accent-coral: #ff7f5c;
            --text-light: #e2e8f0;
            --text-muted: #94a3b8;
            --success: #10b981;
            --warning: #f59e0b;
            --danger: #ef4444;
        }

        * { margin: 0; padding: 0; box-sizing: border-box; }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, var(--primary-dark) 0%, var(--secondary-dark) 100%);
            color: var(--text-light);
            min-height: 100vh;
            line-height: 1.6;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        .header {
            text-align: center;
            margin-bottom: 30px;
            padding: 30px 0;
            background: rgba(30, 58, 95, 0.3);
            border-radius: 15px;
            border: 1px solid rgba(79, 209, 199, 0.2);
        }

        .header h1 {
            font-size: 2.5rem;
            color: var(--accent-teal);
            margin-bottom: 10px;
            text-shadow: 0 0 20px rgba(79, 209, 199, 0.3);
        }

        .subtitle {
            color: var(--text-muted);
            font-size: 1.1rem;
        }

        .tabs {
            display: flex;
            margin-bottom: 30px;
            background: rgba(30, 58, 95, 0.5);
            border-radius: 10px;
            padding: 5px;
        }

        .tab-button {
            flex: 1;
            padding: 12px 20px;
            background: none;
            border: none;
            color: var(--text-muted);
            cursor: pointer;
            border-radius: 8px;
            transition: all 0.3s ease;
            font-size: 1rem;
        }

        .tab-button:hover {
            background: rgba(79, 209, 199, 0.1);
            color: var(--accent-teal);
        }

        .tab-button.active {
            background: var(--accent-teal);
            color: var(--primary-dark);
            font-weight: bold;
        }

        .tab-content {
            display: none;
            background: rgba(30, 58, 95, 0.3);
            border-radius: 15px;
            padding: 30px;
            border: 1px solid rgba(79, 209, 199, 0.2);
        }

        .tab-content.active {
            display: block;
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-group label {
            display: block;
            margin-bottom: 5px;
            color: var(--accent-teal);
            font-weight: 500;
        }

        .form-group input, .form-group select, .form-group textarea {
            width: 100%;
            padding: 12px;
            border: 1px solid rgba(79, 209, 199, 0.3);
            border-radius: 8px;
            background: rgba(10, 22, 40, 0.5);
            color: var(--text-light);
            font-size: 1rem;
        }

        .form-group input:focus, .form-group select:focus, .form-group textarea:focus {
            outline: none;
            border-color: var(--accent-teal);
            box-shadow: 0 0 0 2px rgba(79, 209, 199, 0.2);
        }

        .btn {
            padding: 12px 24px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 1rem;
            font-weight: 500;
            transition: all 0.3s ease;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .btn-primary {
            background: linear-gradient(135deg, var(--accent-teal), #38b2ac);
            color: var(--primary-dark);
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 20px rgba(79, 209, 199, 0.3);
        }

        .btn-danger {
            background: var(--danger);
            color: white;
        }

        .user-card, .permission-card {
            background: rgba(10, 22, 40, 0.6);
            border: 1px solid rgba(79, 209, 199, 0.2);
            border-radius: 10px;
            padding: 20px;
            margin-bottom: 15px;
            transition: all 0.3s ease;
        }

        .user-card:hover, .permission-card:hover {
            border-color: var(--accent-teal);
            box-shadow: 0 5px 20px rgba(79, 209, 199, 0.1);
        }

        .role-badge {
            display: inline-block;
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: bold;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .role-gm { background: var(--accent-coral); color: white; }
        .role-player { background: var(--accent-teal); color: var(--primary-dark); }
        .role-observer { background: var(--text-muted); color: var(--primary-dark); }

        .status-indicator {
            display: inline-block;
            width: 8px;
            height: 8px;
            border-radius: 50%;
            margin-right: 8px;
        }

        .status-online { background: var(--success); }
        .status-offline { background: var(--text-muted); }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .stat-card {
            background: rgba(10, 22, 40, 0.6);
            border: 1px solid rgba(79, 209, 199, 0.2);
            border-radius: 10px;
            padding: 20px;
            text-align: center;
        }

        .stat-number {
            font-size: 2rem;
            font-weight: bold;
            color: var(--accent-teal);
            margin-bottom: 5px;
        }

        .alert {
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 20px;
            display: none;
        }

        .alert.success {
            background: rgba(16, 185, 129, 0.1);
            border: 1px solid var(--success);
            color: var(--success);
        }

        .alert.error {
            background: rgba(239, 68, 68, 0.1);
            border: 1px solid var(--danger);
            color: var(--danger);
        }

        .loading {
            text-align: center;
            padding: 40px;
            color: var(--text-muted);
        }

        .session-info {
            background: rgba(10, 22, 40, 0.8);
            border: 1px solid rgba(79, 209, 199, 0.3);
            border-radius: 10px;
            padding: 15px;
            margin-bottom: 20px;
            font-size: 0.9rem;
        }

        .file-list {
            max-height: 400px;
            overflow-y: auto;
            background: rgba(10, 22, 40, 0.3);
            border-radius: 8px;
            padding: 15px;
        }

        .file-item {
            padding: 8px 12px;
            border-bottom: 1px solid rgba(79, 209, 199, 0.1);
            color: var(--text-muted);
            font-family: 'Courier New', monospace;
            font-size: 0.9rem;
        }

        .file-item:last-child {
            border-bottom: none;
        }

        .pattern-input {
            font-family: 'Courier New', monospace;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üõ°Ô∏è Cordelia Permissions</h1>
            <div class="subtitle">Role-Based Access Control for the Dual Realm Vault</div>
        </div>

        <div class="session-info" id="sessionInfo" style="display: none;">
            <strong>Current Session:</strong> <span id="currentUser"></span> | 
            <strong>Role:</strong> <span id="currentRole"></span> | 
            <strong>Token:</strong> <span id="currentToken"></span>
        </div>

        <div class="alert" id="alertBox"></div>

        <div class="tabs">
            <button class="tab-button active" onclick="showTab('login')">üîê Authentication</button>
            <button class="tab-button" onclick="showTab('users')">üë• Users</button>
            <button class="tab-button" onclick="showTab('permissions')">üõ°Ô∏è Permissions</button>
            <button class="tab-button" onclick="showTab('access')">üìÅ File Access</button>
            <button class="tab-button" onclick="showTab('stats')">üìä Statistics</button>
        </div>

        <!-- Login Tab -->
        <div class="tab-content active" id="login">
            <h2>Authentication Portal</h2>
            <p style="color: var(--text-muted); margin-bottom: 30px;">
                Access the Cordelia Vault permission system. Create users or authenticate existing ones.
            </p>

            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 40px;">
                <div>
                    <h3>Create New User</h3>
                    <form id="createUserForm">
                        <div class="form-group">
                            <label for="newUsername">Username</label>
                            <input type="text" id="newUsername" required>
                        </div>
                        <div class="form-group">
                            <label for="displayName">Display Name</label>
                            <input type="text" id="displayName" required>
                        </div>
                        <div class="form-group">
                            <label for="email">Email (optional)</label>
                            <input type="email" id="email">
                        </div>
                        <div class="form-group">
                            <label for="role">Role</label>
                            <select id="role" required>
                                <option value="">Select Role</option>
                                <option value="GM">Game Master (Full Access)</option>
                                <option value="Player">Player (Limited Access)</option>
                                <option value="Observer">Observer (Public Only)</option>
                            </select>
                        </div>
                        <button type="submit" class="btn btn-primary">Create User</button>
                    </form>
                </div>

                <div>
                    <h3>User Login</h3>
                    <form id="loginForm">
                        <div class="form-group">
                            <label for="loginUsername">Username</label>
                            <input type="text" id="loginUsername" required>
                        </div>
                        <button type="submit" class="btn btn-primary">Generate Session Token</button>
                    </form>
                </div>
            </div>
        </div>

        <!-- Users Tab -->
        <div class="tab-content" id="users">
            <h2>User Management</h2>
            <p style="color: var(--text-muted); margin-bottom: 30px;">
                Manage registered users and their roles within the Cordelia Vault system.
            </p>

            <div id="usersList" class="loading">
                Loading users...
            </div>
        </div>

        <!-- Permissions Tab -->
        <div class="tab-content" id="permissions">
            <h2>Content Permissions</h2>
            <p style="color: var(--text-muted); margin-bottom: 30px;">
                Configure access rules for different content areas. Protect campaign secrets and spoilers.
            </p>

            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 40px;">
                <div>
                    <h3>Add Permission Rule</h3>
                    <form id="addPermissionForm">
                        <div class="form-group">
                            <label for="pathPattern">Path Pattern</label>
                            <input type="text" id="pathPattern" class="pattern-input" 
                                   placeholder="e.g., 06_GM_Resources/** or **/Shadow_Conspiracy/**" required>
                        </div>
                        <div class="form-group">
                            <label for="allowedRoles">Allowed Roles</label>
                            <select id="allowedRoles" multiple required>
                                <option value="GM">Game Master</option>
                                <option value="Player">Player</option>
                                <option value="Observer">Observer</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="permissionType">Permission Type</label>
                            <select id="permissionType" required>
                                <option value="read">Read</option>
                                <option value="write">Write</option>
                                <option value="admin">Admin</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="reason">Reason</label>
                            <textarea id="reason" rows="3" placeholder="Why this permission is needed..." required></textarea>
                        </div>
                        <button type="submit" class="btn btn-primary">Add Permission</button>
                    </form>
                </div>

                <div>
                    <h3>Current Permission Rules</h3>
                    <div id="permissionsList" class="loading">
                        Loading permissions...
                    </div>
                </div>
            </div>
        </div>

        <!-- Access Tab -->
        <div class="tab-content" id="access">
            <h2>File Access Checker</h2>
            <p style="color: var(--text-muted); margin-bottom: 30px;">
                Check which files are accessible to the current user and test access permissions.
            </p>

            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 40px;">
                <div>
                    <h3>Check File Access</h3>
                    <form id="checkAccessForm">
                        <div class="form-group">
                            <label for="filePath">File Path</label>
                            <input type="text" id="filePath" class="pattern-input" 
                                   placeholder="e.g., 02_Worldbuilding/Groups/The Crown.md" required>
                        </div>
                        <button type="submit" class="btn btn-primary">Check Access</button>
                    </form>
                    <div id="accessResult" style="margin-top: 20px;"></div>
                </div>

                <div>
                    <h3>Accessible Files</h3>
                    <button onclick="loadAccessibleFiles()" class="btn btn-primary" style="margin-bottom: 15px;">
                        Load My Files
                    </button>
                    <div id="accessibleFiles" class="file-list">
                        Click "Load My Files" to see accessible content...
                    </div>
                </div>
            </div>
        </div>

        <!-- Stats Tab -->
        <div class="tab-content" id="stats">
            <h2>System Statistics</h2>
            <p style="color: var(--text-muted); margin-bottom: 30px;">
                Overview of the permission system usage and user distribution.
            </p>

            <div id="statsGrid" class="stats-grid loading">
                Loading statistics...
            </div>
        </div>
    </div>

    <script>
        let currentSession = null;
        
        // Tab management
        function showTab(tabName) {
            // Hide all tabs
            document.querySelectorAll('.tab-content').forEach(tab => {
                tab.classList.remove('active');
            });
            document.querySelectorAll('.tab-button').forEach(btn => {
                btn.classList.remove('active');
            });
            
            // Show selected tab
            document.getElementById(tabName).classList.add('active');
            event.target.classList.add('active');
            
            // Load tab content
            if (tabName === 'users') loadUsers();
            if (tabName === 'permissions') loadPermissions();
            if (tabName === 'stats') loadStats();
        }
        
        // Alert system
        function showAlert(message, type = 'success') {
            const alertBox = document.getElementById('alertBox');
            alertBox.textContent = message;
            alertBox.className = `alert ${type}`;
            alertBox.style.display = 'block';
            
            setTimeout(() => {
                alertBox.style.display = 'none';
            }, 5000);
        }
        
        // Update session info display
        function updateSessionDisplay() {
            const sessionInfo = document.getElementById('sessionInfo');
            if (currentSession) {
                document.getElementById('currentUser').textContent = currentSession.username;
                document.getElementById('currentRole').textContent = currentSession.role;
                document.getElementById('currentToken').textContent = currentSession.token;
                sessionInfo.style.display = 'block';
            } else {
                sessionInfo.style.display = 'none';
            }
        }
        
        // Execute Python command and return result
        async function execPython(command) {
            try {
                // In a real implementation, this would make an API call
                // For this MVI, we'll simulate the functionality
                console.log('Executing:', command);
                
                // Simulate API response based on command
                if (command.includes('create-user')) {
                    return { success: true, message: 'User created successfully' };
                } else if (command.includes('login')) {
                    return { 
                        success: true, 
                        token: 'demo_token_' + Math.random().toString(36).substr(2, 9),
                        message: 'Login successful'
                    };
                } else if (command.includes('list-users')) {
                    return {
                        success: true,
                        users: [
                            { username: 'gm_alice', display_name: 'Alice GM', role: 'GM', last_login: '2025-08-13', created_at: '2025-08-01' },
                            { username: 'player_bob', display_name: 'Bob Player', role: 'Player', last_login: '2025-08-12', created_at: '2025-08-02' },
                            { username: 'observer_carol', display_name: 'Carol Observer', role: 'Observer', last_login: null, created_at: '2025-08-03' }
                        ]
                    };
                } else if (command.includes('stats')) {
                    return {
                        success: true,
                        stats: {
                            total_users: 3,
                            active_sessions: 2,
                            permission_rules: 6,
                            role_distribution: { GM: 1, Player: 1, Observer: 1 }
                        }
                    };
                }
                
                return { success: true, message: 'Command executed' };
                
            } catch (error) {
                return { success: false, message: error.message };
            }
        }
        
        // Form handlers
        document.getElementById('createUserForm').onsubmit = async (e) => {
            e.preventDefault();
            
            const username = document.getElementById('newUsername').value;
            const displayName = document.getElementById('displayName').value;
            const email = document.getElementById('email').value;
            const role = document.getElementById('role').value;
            
            const emailParam = email ? `--email "${email}"` : '';
            const command = `python3 scripts/role_based_permissions.py create-user "${username}" "${displayName}" "${role}" ${emailParam}`;
            
            const result = await execPython(command);
            
            if (result.success) {
                showAlert(`‚úÖ User '${username}' created with role '${role}'`, 'success');
                document.getElementById('createUserForm').reset();
            } else {
                showAlert(`‚ùå ${result.message}`, 'error');
            }
        };
        
        document.getElementById('loginForm').onsubmit = async (e) => {
            e.preventDefault();
            
            const username = document.getElementById('loginUsername').value;
            const command = `python3 scripts/role_based_permissions.py login "${username}"`;
            
            const result = await execPython(command);
            
            if (result.success) {
                currentSession = {
                    username: username,
                    token: result.token,
                    role: username.includes('gm') ? 'GM' : username.includes('player') ? 'Player' : 'Observer'
                };
                updateSessionDisplay();
                showAlert(`‚úÖ Login successful for ${username}`, 'success');
                document.getElementById('loginForm').reset();
            } else {
                showAlert(`‚ùå ${result.message}`, 'error');
            }
        };
        
        document.getElementById('addPermissionForm').onsubmit = async (e) => {
            e.preventDefault();
            
            if (!currentSession) {
                showAlert('‚ùå Please login first', 'error');
                return;
            }
            
            const pattern = document.getElementById('pathPattern').value;
            const roles = Array.from(document.getElementById('allowedRoles').selectedOptions).map(o => o.value);
            const type = document.getElementById('permissionType').value;
            const reason = document.getElementById('reason').value;
            
            const command = `python3 scripts/role_based_permissions.py add-permission "${pattern}" "${roles.join(',')}" --type "${type}" --created-by "${currentSession.username}" --reason "${reason}"`;
            
            const result = await execPython(command);
            
            if (result.success) {
                showAlert(`‚úÖ Permission rule added for pattern '${pattern}'`, 'success');
                document.getElementById('addPermissionForm').reset();
                loadPermissions();
            } else {
                showAlert(`‚ùå ${result.message}`, 'error');
            }
        };
        
        document.getElementById('checkAccessForm').onsubmit = async (e) => {
            e.preventDefault();
            
            if (!currentSession) {
                showAlert('‚ùå Please login first', 'error');
                return;
            }
            
            const filePath = document.getElementById('filePath').value;
            const command = `python3 scripts/role_based_permissions.py check-access "${currentSession.token}" "${filePath}"`;
            
            const result = await execPython(command);
            
            const resultDiv = document.getElementById('accessResult');
            if (result.success) {
                const canAccess = Math.random() > 0.3; // Simulate access check
                resultDiv.innerHTML = `
                    <div class="user-card">
                        <strong>File:</strong> ${filePath}<br>
                        <strong>User:</strong> ${currentSession.username} (${currentSession.role})<br>
                        <strong>Access:</strong> <span style="color: ${canAccess ? 'var(--success)' : 'var(--danger)'}">
                            ${canAccess ? '‚úÖ ALLOWED' : '‚ùå DENIED'}
                        </span>
                    </div>
                `;
            } else {
                resultDiv.innerHTML = `<div class="alert error">${result.message}</div>`;
            }
        };
        
        // Load functions
        async function loadUsers() {
            const usersList = document.getElementById('usersList');
            usersList.innerHTML = '<div class="loading">Loading users...</div>';
            
            const result = await execPython('python3 scripts/role_based_permissions.py list-users');
            
            if (result.success && result.users) {
                usersList.innerHTML = '';
                result.users.forEach(user => {
                    const isOnline = user.last_login && new Date(user.last_login) > new Date(Date.now() - 24*60*60*1000);
                    const userCard = document.createElement('div');
                    userCard.className = 'user-card';
                    userCard.innerHTML = `
                        <div style="display: flex; justify-content: between; align-items: center;">
                            <div>
                                <span class="status-indicator ${isOnline ? 'status-online' : 'status-offline'}"></span>
                                <strong>${user.display_name}</strong> (@${user.username})
                                <span class="role-badge role-${user.role.toLowerCase()}">${user.role}</span>
                            </div>
                            <div style="text-align: right; color: var(--text-muted); font-size: 0.9rem;">
                                <div>Joined: ${user.created_at.split('T')[0]}</div>
                                <div>Last Login: ${user.last_login ? user.last_login.split('T')[0] : 'Never'}</div>
                            </div>
                        </div>
                    `;
                    usersList.appendChild(userCard);
                });
            } else {
                usersList.innerHTML = '<div class="alert error">Failed to load users</div>';
            }
        }
        
        async function loadPermissions() {
            const permissionsList = document.getElementById('permissionsList');
            permissionsList.innerHTML = '<div class="loading">Loading permissions...</div>';
            
            // Simulate loading permissions
            setTimeout(() => {
                const defaultPermissions = [
                    { pattern: '06_GM_Resources/**', roles: ['GM'], type: 'read', reason: 'GM-only resources and campaign secrets' },
                    { pattern: '**/Shadow_Conspiracy/**', roles: ['GM'], type: 'read', reason: 'Major campaign spoilers for players' },
                    { pattern: '**/Deep_Mother*', roles: ['GM'], type: 'read', reason: 'End-game campaign secrets' },
                    { pattern: '07_Player_Resources/**', roles: ['GM', 'Player', 'Observer'], type: 'read', reason: 'Content designed for all players' },
                    { pattern: '02_Worldbuilding/**', roles: ['GM', 'Player'], type: 'read', reason: 'General world lore accessible to players' },
                    { pattern: '01_Adventures/**', roles: ['GM'], type: 'read', reason: 'Campaign adventures contain spoilers' }
                ];
                
                permissionsList.innerHTML = '';
                defaultPermissions.forEach(perm => {
                    const permCard = document.createElement('div');
                    permCard.className = 'permission-card';
                    permCard.innerHTML = `
                        <div style="margin-bottom: 10px;">
                            <code style="background: rgba(79, 209, 199, 0.1); padding: 4px 8px; border-radius: 4px; font-size: 0.9rem;">
                                ${perm.pattern}
                            </code>
                        </div>
                        <div style="margin-bottom: 8px;">
                            <strong>Roles:</strong> 
                            ${perm.roles.map(role => `<span class="role-badge role-${role.toLowerCase()}">${role}</span>`).join(' ')}
                        </div>
                        <div style="margin-bottom: 8px;">
                            <strong>Type:</strong> ${perm.type}
                        </div>
                        <div style="color: var(--text-muted); font-size: 0.9rem;">
                            ${perm.reason}
                        </div>
                    `;
                    permissionsList.appendChild(permCard);
                });
            }, 500);
        }
        
        async function loadStats() {
            const statsGrid = document.getElementById('statsGrid');
            statsGrid.innerHTML = '<div class="loading">Loading statistics...</div>';
            
            const result = await execPython('python3 scripts/role_based_permissions.py stats');
            
            if (result.success && result.stats) {
                const stats = result.stats;
                statsGrid.innerHTML = `
                    <div class="stat-card">
                        <div class="stat-number">${stats.total_users}</div>
                        <div>Total Users</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-number">${stats.active_sessions}</div>
                        <div>Active Sessions</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-number">${stats.permission_rules}</div>
                        <div>Permission Rules</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-number">${stats.role_distribution.GM || 0}</div>
                        <div>Game Masters</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-number">${stats.role_distribution.Player || 0}</div>
                        <div>Players</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-number">${stats.role_distribution.Observer || 0}</div>
                        <div>Observers</div>
                    </div>
                `;
            } else {
                statsGrid.innerHTML = '<div class="alert error">Failed to load statistics</div>';
            }
        }
        
        async function loadAccessibleFiles() {
            if (!currentSession) {
                showAlert('‚ùå Please login first', 'error');
                return;
            }
            
            const filesDiv = document.getElementById('accessibleFiles');
            filesDiv.innerHTML = '<div class="loading">Loading accessible files...</div>';
            
            // Simulate loading accessible files
            setTimeout(() => {
                const sampleFiles = [
                    '07_Player_Resources/Player Portal.md',
                    '07_Player_Resources/Quick Start Guide.md',
                    '02_Worldbuilding/Lore/Aquabyssos World Guide.md',
                    '02_Worldbuilding/Lore/Crown of Stars.md',
                    '02_Worldbuilding/Groups/The Crown.md',
                    '02_Worldbuilding/Items/Aether Crystals.md',
                    '03_Mechanics/Character Creation Guide.md',
                    currentSession.role === 'GM' ? '06_GM_Resources/GM_Toolkit.canvas' : null,
                    currentSession.role === 'GM' ? '01_Adventures/Seven_Shards_Campaign/Campaign_Overview.md' : null
                ].filter(Boolean);
                
                filesDiv.innerHTML = '';
                sampleFiles.forEach(file => {
                    const fileDiv = document.createElement('div');
                    fileDiv.className = 'file-item';
                    fileDiv.textContent = file;
                    filesDiv.appendChild(fileDiv);
                });
                
                if (sampleFiles.length === 0) {
                    filesDiv.innerHTML = '<div style="text-align: center; color: var(--text-muted);">No accessible files found</div>';
                }
            }, 1000);
        }
        
        // Initialize
        document.addEventListener('DOMContentLoaded', () => {
            updateSessionDisplay();
        });
    </script>
</body>
</html>